{"version":3,"file":"index.mjs","sources":["../../index.ts"],"sourcesContent":["const toString = Object.prototype.toString;\n\nfunction getKeys(value: unknown): (string | symbol)[] | null {\n  if (Array.isArray(value)) {\n    return Object.keys(value);\n  }\n\n  if (toString.call(value) === '[object Object]') {\n    return [\n      ...Object.keys(value as Record<string, unknown>),\n      ...Object.getOwnPropertySymbols(value)\n    ];\n  }\n\n  return null;\n}\n\ntype Entry = {\n  key: (string | symbol)[];\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value: any;\n};\n\nexport function entryList(\n  value: unknown,\n  prefix: (string | symbol)[] = [],\n  result: Entry[] = [],\n  references: unknown[] = []\n): Entry[] {\n  const keys = getKeys(value);\n\n  if (keys === null) {\n    result.push({ value, key: prefix });\n  } else {\n    references.push(value);\n\n    for (let i = 0, len = keys.length; i < len; ++i) {\n      // NOTE: https://github.com/microsoft/TypeScript/issues/1863\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const v = (value as Record<string | symbol, any>)[keys[i] as any];\n\n      if (references.includes(v)) {\n        result.push({\n          value: v,\n          key: [...prefix, keys[i]]\n        });\n      } else {\n        entryList(v, [...prefix, keys[i]], result, references);\n      }\n    }\n  }\n\n  return result;\n}\n"],"names":[],"mappings":"AAAA,MAAM,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;AAC3C,SAAS,OAAO,CAAC,KAAc;IAC3B,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QACtB,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC7B;IACD,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,iBAAiB,EAAE;QAC5C,OAAO;YACH,GAAG,MAAM,CAAC,IAAI,CAAC,KAAgC,CAAC;YAChD,GAAG,MAAM,CAAC,qBAAqB,CAAC,KAAK,CAAC;SACzC,CAAC;KACL;IACD,OAAO,IAAI,CAAC;AAChB,CAAC;SAMe,SAAS,CAAC,KAAc,EAAE,SAA8B,EAAE,EAAE,SAAkB,EAAE,EAAE,aAAwB,EAAE;IACxH,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;IAC5B,IAAI,IAAI,KAAK,IAAI,EAAE;QACf,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC;KACvC;SACI;QACD,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;;;YAG7C,MAAM,CAAC,GAAI,KAAsC,CAAC,IAAI,CAAC,CAAC,CAAQ,CAAC,CAAC;YAClE,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;gBACxB,MAAM,CAAC,IAAI,CAAC;oBACR,KAAK,EAAE,CAAC;oBACR,GAAG,EAAE,CAAC,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC5B,CAAC,CAAC;aACN;iBACI;gBACD,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;aAC1D;SACJ;KACJ;IACD,OAAO,MAAM,CAAC;AAClB;;;;"}