{"version":3,"file":"entry-list.js","sources":["../../index.ts"],"sourcesContent":["const toString = Object.prototype.toString;\n\nfunction getKeys(value: unknown): (string | symbol)[] | null {\n  if (Array.isArray(value)) {\n    return Object.keys(value);\n  }\n\n  if (toString.call(value) === '[object Object]') {\n    return [\n      ...Object.keys(value as Record<string, unknown>),\n      ...Object.getOwnPropertySymbols(value)\n    ];\n  }\n\n  return null;\n}\n\ntype Entry = {\n  key: (string | symbol)[];\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value: any;\n};\n\nexport function entryList(\n  value: unknown,\n  prefix: (string | symbol)[] = [],\n  result: Entry[] = [],\n  references: unknown[] = []\n): Entry[] {\n  const keys = getKeys(value);\n\n  if (keys === null) {\n    result.push({ value, key: prefix });\n  } else {\n    references.push(value);\n\n    for (let i = 0, len = keys.length; i < len; ++i) {\n      // NOTE: https://github.com/microsoft/TypeScript/issues/1863\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const v = (value as Record<string | symbol, any>)[keys[i] as any];\n\n      if (references.includes(v)) {\n        result.push({\n          value: v,\n          key: [...prefix, keys[i]]\n        });\n      } else {\n        entryList(v, [...prefix, keys[i]], result, references);\n      }\n    }\n  }\n\n  return result;\n}\n"],"names":[],"mappings":";;;;;;;;;;;EAAA,MAAM,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;EAC3C,SAAS,OAAO,CAAC,KAAc;MAC3B,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;UACtB,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OAC7B;MACD,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,iBAAiB,EAAE;UAC5C,OAAO;cACH,GAAG,MAAM,CAAC,IAAI,CAAC,KAAgC,CAAC;cAChD,GAAG,MAAM,CAAC,qBAAqB,CAAC,KAAK,CAAC;WACzC,CAAC;OACL;MACD,OAAO,IAAI,CAAC;EAChB,CAAC;WAMe,SAAS,CAAC,KAAc,EAAE,SAA8B,EAAE,EAAE,SAAkB,EAAE,EAAE,aAAwB,EAAE;MACxH,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;MAC5B,IAAI,IAAI,KAAK,IAAI,EAAE;UACf,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC;OACvC;WACI;UACD,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;UACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;;;cAG7C,MAAM,CAAC,GAAI,KAAsC,CAAC,IAAI,CAAC,CAAC,CAAQ,CAAC,CAAC;cAClE,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;kBACxB,MAAM,CAAC,IAAI,CAAC;sBACR,KAAK,EAAE,CAAC;sBACR,GAAG,EAAE,CAAC,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;mBAC5B,CAAC,CAAC;eACN;mBACI;kBACD,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;eAC1D;WACJ;OACJ;MACD,OAAO,MAAM,CAAC;EAClB;;;;;;;;;;"}